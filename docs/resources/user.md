---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "clickhousedbops_user Resource - clickhousedbops"
subcategory: ""
description: |-
  You can use the clickhousedbops_user resource to create a user in a ClickHouse instance.
  Known limitations:
  Changing the password_sha256_hash_wo field alone does not have any effect. In order to change the password of a user, you also need to bump password_sha256_hash_wo_version field.Changing the user's password as described above will cause the database user to be deleted and recreated.When importing an existing user, the clickhousedbops_user resource will be lacking the password_sha256_hash_wo_version and thus the subsequent apply will need to recreate the database User in order to set a password.
---

# clickhousedbops_user (Resource)

You can use the `clickhousedbops_user` resource to create a user in a `ClickHouse` instance.

Known limitations:

- Changing the `password_sha256_hash_wo` field alone does not have any effect. In order to change the password of a user, you also need to bump `password_sha256_hash_wo_version` field.
- Changing the user's password as described above will cause the database user to be deleted and recreated.
- When importing an existing user, the `clickhousedbops_user` resource will be lacking the `password_sha256_hash_wo_version` and thus the subsequent apply will need to recreate the database User in order to set a password.

## Example Usage

```terraform
resource "clickhousedbops_user" "john_doe" {
  cluster_name = "dev_cluster"
  name = "john_doe"
  # Option 1: password-based auth
  # password_sha256_hash_wo = sha256("test")
  # password_sha256_hash_wo_version = 4

  # Option 2: SSL certificate CN auth (mutually exclusive with password)
  ssl_certificate_cn = "john_doe"
  default_role = "reader"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

> **NOTE**: [Write-only arguments](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments) are supported in Terraform 1.11 and later.

- `name` (String) Name of the user
- `ssl_certificate_cn` (String) CN of the SSL certificate to be used for the user (mutually exclusive with `password_sha256_hash_wo`).
- `password_sha256_hash_wo` (String) SHA256 hash of the password to be set for the user (mutually exclusive with `ssl_certificate_cn`). Write-only.
- `password_sha256_hash_wo_version` (Number) Version of the password_sha256_hash_wo field. Bump this value to require a force update of the password on the user.

### Optional

- `cluster_name` (String) Name of the cluster to create the resource into. If omitted, resource will be created on the replica hit by the query.
This field must be left null when using a ClickHouse Cloud cluster.
When using a self hosted ClickHouse instance, this field should only be set when there is more than one replica and you are not using 'replicated' storage for user_directory.

### Read-Only

- `id` (String) The system-assigned ID for the user

## Import

Import is supported using the following syntax:

```shell
# Users can be imported by specifying the ID.
# Find the ID of the user by checking system.users table.
# WARNING: imported users will be recreated during first 'terraform apply' because the password cannot be imported.
terraform import clickhousedbops_user.example xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# It's also possible to import users using the username:

terraform import clickhousedbops_user.example username

# IMPORTANT: if you have a multi node cluster, you need to specify the cluster name!

terraform import clickhousedbops_user.example cluster:xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
terraform import clickhousedbops_user.example cluster:username
```
